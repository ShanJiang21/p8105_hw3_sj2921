---
title: "p8105_hw3_sj2921"
author: "Shan Jiang"
date: "10/5/2018"
output: github_document
---
## Problem 1

```{r echo=FALSE,results='hide'}
library(tidyverse)
library(p8105.datasets)
# Import the BFRSS data, exclude variables and format the data by using appropriate names.
brfss_df <- 
    brfss_smart2010 %>% 
    janitor::clean_names() %>% 
    filter(response == "Excellent"  | response == "Very good" | response == "Good" | response == "Fair" | response == "Poor") 

# Set the graph properties(theme, color and size) for ggplot
library(ggplot2)
library(readxl)
knitr::opts_chunk$set(
  fig.width = 6,
  fig.asp = .6,
  out.width = "90%"
)
theme_set(theme_bw() + theme(legend.position = "bottom"))
```
* 1.In 2002,  CT, MT, NH, NM, OR, TN, UT were observed at 7 locations.
```{r}
 brfss_df %>% 
  group_by(locationabbr) %>% 
  distinct(locationdesc) %>% 
  summarise(n = n()) %>% 
  filter(n == 7)
```
* 2.Make a spaghetti plot showing the number of observations in each state from 2002 to 2010
```{r}
ggplot(brfss_df, )


```
* 3. Make a table showing, for the years 2002, 2006, and 2010, the mean and standard deviation of the proportion of “Excellent” responses across locations in NY State.
```{r}
 brfss_df %>% 
  filter(locationabbr == "NY" & response == "Excellent") %>%
  filter(year == "2002" | year == "2006" | year == "2010") %>% 
  group_by(year) %>% 
  summarise(mean_ex = mean(data_value),
            sd_ex = sd(data_value)) 
```

* 4. For each year and state, compute the average proportion in each response category (taking the average across locations in a state). Make a five-panel plot that shows, for each response category separately, the distribution of these state-level averages over time.
```{r}

```


# structure data: Response indicating the proportion of subjects with each response
```{r}
# Convert response to build a factor
fac_response <- factor(response)
# Specify the levels of response_vector
levels <- (c("Excellent", "Very Good", "Good", "Fair", "Poor"))
fac_response 
```
1. In 2002,  states were observed at 7 locations
```{r}

```
2. Graph spaghetti plot that shows the number of observations in each state from 2002 to 2010
 

